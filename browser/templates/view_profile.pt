<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  metal:use-macro="context/@@groupserver_site_home_layout/page">
  <head>
    <title metal:fill-slot="title">
      Profile of 
      <span tal:replace="view/userName">
        A. Person
      </span>
    </title>
  </head>
  <body>
    <tal:block metal:fill-slot="body">
      <h1>Profile of 
        <span class="fn" tal:content="view/userName">A. Person</span>
      </h1>
      
      <div class="userimage">
        <img src="/foo" title="Image of A. Person"
          tal:attributes="src string:/${view/userImageUrl};
            title string:Image of ${view/userName}"/>
      </div>
      
      <dl id="profileAtributes"
        tal:define="properties view/properties">
        <tal:block tal:repeat="prop python:properties.keys()">
          <dt tal:content="python:properties[prop]"/>
          <dd tal:content="python:view.get_property(prop)"/>
        </tal:block>
      </dl>

      <div class="cols">      
        <div id="files" class="rightColumn">
          <h2>Latest Files</h2>
          <div id="latestFiles"><img src="/++resource++anim/wait.gif"/>
            Loading the latest files by
            <span class="fn" tal:content="view/userName"/>
          </div>
          <p>
            <a title="More files by A. Person"
              href="#"
              tal:attributes="href string:/s/p=0&amp;t=0&amp;f=1&amp;a=${view/userId};
                title string:More files by ${view/userName};">More&#8230;</a>
          </p>
        </div><!--Files-->
        <div id="posts" class="leftColumn">
          <h2>Latest Posts</h2>
          <div id="latestPosts"><img src="/++resource++anim/wait.gif"/>
            Loading the latest posts by
            <span class="fn" tal:content="view/userName"/>
          </div>
          <p>
            <a title="More posts by A. Person"
              href="#"
              tal:attributes="href string:/s/p=1&amp;t=0&amp;a=${view/userId};
                title string:More posts by ${view/userName};">More&#8230;</a>
          </p>
        </div><!--Posts-->
      </div><!--cols-->
    </tal:block>
    <tal:block metal:fill-slot="javascript">
      <script type="text/javascript">
        jQuery.noConflict();
        jQuery(document).ready( function () {
            var ajaxUri = "/s/search.ajax?a=<span tal:replace="view/userId"/>";

            var postsUri = ajaxUri + "&amp;t=0&amp;p=1&amp;f=0&amp;r=0";
            jQuery("#latestPosts").load(postsUri);
            
            var filesUri = ajaxUri + "&amp;t=0&amp;p=0&amp;f=1&amp;r=0";
            jQuery("#latestFiles").load(filesUri);
        });
      </script>
    </tal:block>
  </body>
</html>

