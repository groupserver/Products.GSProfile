<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  metal:use-macro="context/@@groupserver_layout/page">
  <head>
    <title metal:fill-slot="title">
      <span tal:replace="string:${view/label}: ${view/userName}: ${view/siteInfo/get_name}">
        Edit Image
      </span>
    </title>
  </head>
  <body>
    <div metal:fill-slot="messages" tal:condition="view/status" 
      class="message-error"
      tal:define="e view/errors"
      tal:attributes="class python:e and 'message-error' or 'message-result'">
      <p class="form-status" tal:content="structure view/status"/>
      <dl tal:condition="view/errors">
        <tal:block repeat="widget view/widgets">
          <tal:block tal:condition="widget/error">
            <dt tal:content="widget/label">Widget Name</dt>
            <dd class="error" 
              tal:content="structure widget/error">Error message</dd>
          </tal:block>
        </tal:block>
      </dl>
    </div>
    <tal:block metal:fill-slot="contextnavigation">
      <span 
        tal:replace="structure provider:groupserver.ProfileContextMenu">
        Context Menu
      </span>
    </tal:block>
    <tal:block metal:fill-slot="body">
      <form enctype="multipart/form-data"  method="post" action="."
        tal:attributes="action request/URL" id="edit-profile">
        
        <h1 tal:content="view/label">Edit Image</h1>
        <div tal:define="user view/context;
          showImageRegardlessOfUserSetting python:True"
          tal:replace="structure provider:groupserver.UserImage" />
        <p>
          Your image is typically a photograph that others use to quickly
          identify posts that you make.
          It must be in JPEG-image (<code>.jpg</code>) and can be no wider
          than 150 pixels, and no higher than 200 pixels.
          Your image normally appears on your profile all posts
          that you make, but you can hide your image by unchecking the
          <samp class="field">Show Image</samp> field.
        </p>
        <div style="clear: both;"/>
        <tal:block repeat="widget view/widgets">
          <div class="form-widget" id="widget-abc123" 
            tal:define="req widget/required;
              style python:req and 'required' or 'not-required'"
            tal:attributes="id string:widget-${widget/name};
              class string:form-widget ${style}">
            <label for="abc123" title="The hint for the widget"
              tal:attributes="for widget/name; title widget/hint"
              tal:content="widget/label">
              A label
            </label>
            
            <p class="error" tal:condition="widget/error"
              tal:content="structure widget/error">
              Error message
            </p>
            
            <span id="abc123" 
              tal:replace="structure widget">Widget</span>
          </div><!--form-widget-->
        </tal:block>
        <div class="buttons" tal:condition="view/availableActions">
          <tal:block repeat="action view/actions">
            <div class="formelementbutton">
              <span tal:replace="structure action/render">Button</span>
            </div>
          </tal:block>
        </div><!--buttons-->
      </form>
    </tal:block>
    <tal:block metal:fill-slot="javascript">
      <script type="text/javascript"
        src="/++resource++check_required-20071214.js">&#160;</script>
      <script type="text/javascript"
        src="/++resource++popup_help-20071218.js">&#160;</script>
      <script type="text/javascript"
        tal:define="rws python:[w for w in view.widgets if w.required];
          rwIds python:['\'#%s\''%w.name.replace('.','\\\\.') for w in rws];
          arr python:'%s' % ', '.join(rwIds);">
        jQuery.noConflict()
        jQuery(document).ready( function () {
            var gsRequiredWidgets = new Array(<span tal:replace="arr" />);
            GSCheckRequired.init(
              gsRequiredWidgets, 
              '#form\\.actions\\.edit');
              
            GSPopupFormHelp.init('#edit-profile');

            jQuery("#privacy-button").click( function () {
                var gsUri = "/about/policies/privacy/ #privacy";
                jQuery("#privacy-content").load(gsUri);
            });
        });
      </script>
      <script type="text/javascript" 
        src="/++resource++jquery-1.2.1.min.js">&#160;</script>
      <script type="text/javascript" 
        src="/++resource++wymeditor/jquery.wymeditor.pack.js">&#160;</script>
      <script type="text/javascript" 
        src="/++resource++wymeditor/init.js">&#160;</script>
    </tal:block>
  </body>
</html>

